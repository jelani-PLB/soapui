<!DOCTYPE html>
<html>

	<!-- CSS -->
	<style>
		html, body {
			height: 98%;
		}
		a:link {
			text-decoration: none;
			color: black;
		}
		a:visited {
			color: black;
		}
		a:hover {
			background-color: #9AE6FF;
		}
		.column {
			float: left;
			border: solid gray 1px;
			height: 90%;
			margin-left: 4px;
			padding: 5px;
		}
		.project {
			background-color: #fce3e3;
		}
		.testsuite {
			padding-left: 1.5em;
			background-color: #fce3e3;
		}
		.testcase {
			padding-left: 1.5em;
		  background-color: #e3fce9;
		}
		.teststep {
			padding-left: 1.5em;
			/* background-color: red; */
		}
		.collapsed {
			display: none;
			overflow: hidden;
		}
		.navigation_link {
			margin-left: 2px;
		}
		.passed {
			display: none;
		}
		#navigator {
			width: 22%;
		}
		#editor {
			width: 75%;
		}
		#upper_bar {
			border: solid gray 1px;
			margin-left: 4px;
			margin-bottom: 4px;
			padding: 5px;
			width: 98%;
			display: inline-block;
		}
		#filter {
			float:left;
			font-weight: bold;
		}
		#stats {
			float: right;
			font-weight: bold;
			color: red;
		}
	</style>

	<!-- HTML -->
	<body>
		<div id="upper_bar">
			<div id="filter">Only show failed tests<input type="checkbox" onchange="doalert(this)" checked></div>
			<div id="stats">4/10 tests failed</div>
		</div>
		<!-- Navigator - left side of the screen -->
		<div id="navigator" class="column">
			<div class="project"><img src="icons/test_project.png"><a href='#' class="navigation_link" onClick="display_editor(this.parentNode.id)">TestProjectA</a>
				<div class="testsuite passed">
					<div id="TestSuiteA"  class="collapsible"><img src="icons/test_suite.png"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">TestSuiteA</a></div>
					<div class="collapsed">
						<div class="testcase">
							<div id="TestSuiteA/TestCaseA" class="collapsible"><img src="icons/test_case.png"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">TestCaseA</a></div>
							<div class="collapsed teststep">
								<div id="TestSuiteA/TestCaseA/TestStep1"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep1</a></div>
								<div id="TestSuiteA/TestCaseA/TestStep2"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep2</a></div>
								<div id="TestSuiteA/TestCaseA/TestStep3"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/jdbc_step.png" style="padding-right: 0.25em">TestStep3</a></div>
							</div>
						</div>
						<div class="testcase">
							<div id="TestSuiteA/TestCaseB" class="collapsible"><img src="icons/test_case.png"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">TestCaseB</a></div>
							<div class="collapsed teststep">
								<div id="TestSuiteA/TestCaseB/TestStep1"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep1</a></div>
								<div id="TestSuiteA/TestCaseB/TestStep2"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep2</a></div>
								<div id="TestSuiteA/TestCaseB/TestStep3"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep3</a></div>
							</div>
						</div>
					</div>
				</div>
				<div class="testsuite failed">
					<div id="TestSuiteB"  class="collapsible"><img src="icons/test_suite.png"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">TestSuiteB</a></div>
					<div class="collapsed">
						<div class="testcase passed">
							<div id="TestSuiteB/TestCaseA" class="collapsible"><img src="icons/test_case.png"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">TestCaseA</a></div>
							<div class="collapsed teststep">
								<div id="TestSuiteB/TestCaseA/TestStep1"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep1</a></div>
								<div id="TestSuiteB/TestCaseA/TestStep2"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep2</a></div>
								<div id="TestSuiteB/TestCaseA/TestStep3"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep3</a></div>
							</div>
						</div>
						<div class="testcase">
							<div id="TestSuiteB/TestCaseB" class="collapsible"><img src="icons/test_case.png"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">TestCaseB</a></div>
							<div class="collapsed teststep">
								<div id="TestSuiteB/TestCaseB/TestStep1"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep1</a></div>
								<div id="TestSuiteB/TestCaseB/TestStep2"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep2</a></div>
								<div id="TestSuiteB/TestCaseB/TestStep3"><a href="#" class="navigation_link"  onClick="display_editor(this.parentNode.id)">
									<img src="icons/http_step.png" style="padding-right: 0.25em">TestStep3</a></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Editor - right side of the screen -->
		<div id="editor" class="column">

		</div>
	</body>

	<!-- Scripts -->
	<script>
		var coll = document.getElementsByClassName("collapsible");
		var i;

		for (i = 0; i < coll.length; i++) {
			coll[i].addEventListener("click", function() {
			this.classList.toggle("active");
			var content = this.nextElementSibling;
			if (content.style.display === "block") {
				content.style.display = "none";
			} else {
				content.style.display = "block";
			}
			});
		}
	</script>
	<script>
		function display_editor(id) {
			path = `TestProjectA/${id}/Report.html`;
			document.getElementById("editor").innerHTML=`<object type="text/html" style="height: 100%; width: 100%;" data="${path}"></object>`;
		}
	</script>
	<script>
		window.onload=document.getElementById("editor").innerHTML=`<object type="text/html" style="height: 100%; width: 100%;" data="TestProjectA/Report.html"></object>`;
	</script>
	<script>
		function doalert(checkboxElem) {
			if (checkboxElem.checked) {
				// Find all passed test suites and hide them
				var failed_test_suites = document.getElementsByClassName("testsuite passed");
				for (i = 0; i < failed_test_suites.length; i++) {
					failed_test_suites[i].style.display = "none";
				}
				// From the remaining failed test suites there are test cases that are passed.
				// Those must be hidden as well
				var failed_test_cases = document.getElementsByClassName("testcase passed");
				for (i = 0; i < failed_test_cases.length; i++) {
					failed_test_cases[i].style.display = "none";
				}
			} else {
				// Find all test suites and test cases and set them visible
				var all_test_suites = document.getElementsByClassName("testsuite");
				for (i = 0; i < all_test_suites.length; i++) {
					all_test_suites[i].style.display = "inherit";
				}
				var all_test_cases = document.getElementsByClassName("testcase");
				for (i = 0; i < all_test_cases.length; i++) {
					all_test_cases[i].style.display = "inherit";
				}
			}
		}
	</script>

</html>
